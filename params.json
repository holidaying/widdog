{
  "name": "Widdog",
  "tagline": "",
  "body": "<!DOCTYPE html>\r\n<html>\r\n\r\n<head>\r\n    <meta charset=\"utf-8\" http-equiv=\"content-type\" content=\"text/html\" />\r\n    <meta name=\"viewport\" content=\"initial-scale=1.0, maximum-scale=1.0, width=device-width, target-densitydpi=medium-dpi, user-scalable=no\">\r\n    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\r\n    <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\">\r\n    <meta name=\"format-detection\" content=\"telephone=no\">\r\n    <meta http-equiv=\"Pragram\" content=\"no-cache\">\r\n    <meta http-equiv=\"Cache-Control\" content=\"no-cache\">\r\n    <title>聊天室</title>\r\n    <script src = \"https://cdn.wilddog.com/js/client/current/wilddog.js\" ></script>\r\n</head>\r\n    <style>\r\n    .none\r\n    {\r\n        display: none;\r\n    }\r\n</style>\r\n<body>\r\n    <p class=\"\">永久聊天室</p>\r\n    <p class=\"selectinfor\">\r\n        <input type=\"text\" id=\"whoName\" placeholder=\"输入你查询的人\">\r\n        <input type=\"submit\" value=\"查询记录\" id=\"selectRecord\"></p>\r\n    <p class=\"clearbody\">\r\n        <input type=\"submit\" value=\"清除页面\" id=\"clear\"></p>\r\n    <p class=\"clearuser\">\r\n        <input type=\"submit\" value=\"清除自己的聊天记录\" id=\"clearuser\"></p>\r\n    <p class=\"userName\">\r\n        <input type=\"text\" id=\"userName\" placeholder=\"输入你的nickname\">\r\n        <input type=\"submit\" value=\"确定\" id=\"submitName\"></p>\r\n    <p class=\"comment none\">\r\n        <input type=\"text\" id=\"world\">\r\n        <input type=\"submit\" value=\"聊天\" id=\"submit\"></p>\r\n    <div class=\"commentDiv\"></div>\r\n\r\n</body>\r\n    <script src=\"http://cdn.bootcss.com/zepto/1.1.4/zepto.min.js\" type=\"text/javascript\"></script>\r\n    <script>\r\n(function($) {\r\n    var ref = new Wilddog(\"https://john.wilddogio.com/\");\r\n    var nickname = localStorage.getItem(\"userName\");\r\n\r\n    if(nickname)\r\n    {\r\n        $(\".userName\").addClass(\"none\");\r\n        $(\".comment\").removeClass(\"none\")\r\n    }\r\n    $(\"#clear\").click(function() {\r\n     $(\".commentDiv\").empty();\r\n    });\r\n     $(\"#clearuser\").click(function() {\r\n                ref.on(\"value\", function(snapshot) {\r\n                console.log(snapshot);\r\n                snapshot.forEach(function(item)\r\n                {\r\n                    if(item.child(\"nicname\").val()==nickname)\r\n                    {\r\n                        item.ref().remove();\r\n                    }\r\n                })\r\n                ref.off(\"value\");\r\n             })\r\n    });\r\n    $(\"#selectRecord\").click(function() {\r\n\r\n        var userName = $(\"#whoName\").val();\r\n        if(userName==\"\")\r\n        {\r\n            alert(\"请输入用户名\");\r\n        }\r\n        else\r\n        {\r\n            ref.on(\"value\", function(snapshot) {\r\n                $(\".commentDiv\").empty();\r\n                var count=0;\r\n                snapshot.forEach(function(item)\r\n                {\r\n                    if(item.child(\"nicname\").val()==userName)\r\n                    {\r\n                        count++;\r\n                        $(\".commentDiv\").append('<p class=\"'+item.key()+'\">' + item.child(\"nicname\").val()+':'+item.child(\"sayword\").val() + '</p>');\r\n                    }\r\n                })\r\n                if(count==0)\r\n                {\r\n                    $(\".commentDiv\").append('<p'+'没有这个人的记录</p>')\r\n                }\r\n               ref.off(\"value\");\r\n           });\r\n        }\r\n    });\r\n    $(\"#submitName\").click(function() {\r\n        var userName = $(\"#userName\").val();\r\n        localStorage.setItem(\"userName\",userName);\r\n        $(\".userName\").addClass(\"none\");\r\n        $(\".comment\").removeClass(\"none\")\r\n    });\r\n    $(\"#submit\").click(function() {\r\n        var name = localStorage.getItem(\"userName\")?localStorage.getItem(\"userName\"):\"匿名\";\r\n        console.log(name);\r\n        var word = $(\"#world\").val();\r\n        ref.push({\r\n            \"sayword\": word,\r\n            \"nicname\":name\r\n        });\r\n    });\r\n\r\n    // ref.onDisconnect().remove();删除数据库所有记录\r\n    ref.on('child_removed', function(snapshot) {\r\n        console.log(\"=============child_removed==========================\");\r\n        console.log(snapshot.child(\"sayword\").val());\r\n        $(\"p.\"+snapshot.key()).remove();\r\n    });\r\n    ref.on('child_added', function(snapshot) {\r\n        console.log(\"========================================\");\r\n        console.log(snapshot.child(\"sayword\").val());\r\n        $(\".commentDiv\").append('<p class=\"'+snapshot.key()+'\">' + snapshot.child(\"nicname\").val()+':'+snapshot.child(\"sayword\").val() + '</p>');\r\n    });\r\n    \r\n})(Zepto);\r\n</script>\r\n</html>",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}